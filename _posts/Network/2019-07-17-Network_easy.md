---
layout: post
title:  "후니의 쉽게쓴 시스코 네트워킹 - Part4"
date: 2019-07-19 00:00:00
img:
categories:
- Network
tags: [Network Basic]
---

## 후니의 쉽게쓴 시스코 네트워킹
### Part4. 네트워크 장비에 관한 이야기

--- 

1. 랜카드도 세팅해야하나요?
- 랜카드 역할: 유저의 데이터를 케이블에 실어서 허브나, 스위치 혹은 라우터 등으로 전달해주고 자신에게 온 데이터를 CPU에게 전달
- 이더넷용 랜카드와 토큰링용 랜카드, FDDI, ATM 랜카드로 구분
- 100Mbps / 1Gbps 랜카드 
- 10Mbps 데이터 전송 속도가 1초에 10,000,000bit = 1,250,000 바이트 = 1초에 1MB 
- 1바이트 = 8비트 
- IRG(Interrupt Request), Base Memory: 목적지인 데이터가 들어왔을 때 랜카드는 CPU에 가지고 있던 IRQ를 이용하여 인터럽트를 걸음 -> CPU가 이 데이터에 어떤 서비스를 할 것인지 미리 정해 놓는 장소(Base Memory)

2. 허브 
- 허브 = 멀티포트 리리터: 허브는 포트가 여러개 달린 장비로서, 한 포트로 들어온 데이터를 나머지 모든 포트로 뿌려줌
- 리피터: 중간에 들어온 데이터를 다른쪽으로 전달해주는 역할 
- 랜카드는 들어온 프레임의 목적지 MAC 주소 비교후 일치하지 않으면 버림
- 이더넷 허브의 경우 CSMA/CD(눈치껏 대충 알아서 통신): 하나의 PC가 데이터를 보내면 또다른 PC가 데이터 보내려고하면 콜리전 발생 -> 이 허브에 연결된 모든 PC가 통신에 영향을 받는 다는 개념 
- 허브의 한계
    - 허브에 연결된 모든 PC 들은 하나의 콜리전 도메인 안에 있기 때문에 어느 한순간에는 한 PC만 데이터를 보낼 수 있음 = Shared 공유방식
    - 콜리전 발생 -> 모든 PC 영향 

3. 허브의 종류 
- 인텔리전트 허브 
    - NMS(네트워크 관리 시스템)을 통해 관리, 예) 모든 데이터 분석, 제어, 허브 동작 감시 조정 가능 = 대형 네트워크에 필요 
    - Auto Partition: 허브에 연결된 한 PC가 문제가 생겼을 경우, 연결된 포트를 찾아내어 자동으로 Isolation = 네트워크에서 분리시켜 고립, 문제가 발생한 PC는 통신은 불가하지만 나머지 PC에 영향을 주지 않음으로서 정상적인 통신이 가능 
    
- 더미 허브
    - 세미 더미 허브: 인텔리전트 허브와 연결하면 자신도 인텔리전트 허브가 되는 것, 만약 혼자만 있으면 더비허브
- 세미인텔리전트 허브
- stackable
    - 허브의 상태를 웹 브라우저를 통해 그대로 확인할 수 있고 포트 상태 데이터 양 감시 가능
    - 서로간의 연결이 훨씬 효율적 
    - Backplane: 장비간에 데이터 전송을 위해 연결된 일종의 고속도로 
    - 훨씬 발라지고 연결된 장비 중의 하나가 고장이 나도 다른 장비에 영향을 주지 않는 장점 

4. 허브의 끝과 스위치의 시작
- 허브: 한 PC만 데이터를 보낼 수 있고, 콜리전 도메인이 너무 커지는 경우 콜리전에 의해 영향 받는 PC도 많아져서 속도가 느려짐 
- 브리지, 스위치: 콜리전 도메인 나누는 장비
- 스위치: 포트별로 콜리전 도메인이 나눌 수 있음 
    - 예) 1번과 2번 사이에 통신이 일어나면 나머지 모든 PC들이 기다려야만 하는 것은 허브, 스위치는 다른 PC들도 동시에 통신 가능
- 허브와 스위치 비교
    - 데이터 처리 속도: 허브 > 스위치, 들어온 데이터를 그냥 내보내기만 하면 됨
- 모든 PC가 서버와 통신한다고 가정
    - 한곳으로만 향하는 경우 허브나 스위치 속도 크게 차이나지 않음
    - 스위치는 통신 효율성은 높일 수 있으나 콜리전 도메인을 나누는 기능을 이용한 속도 향상은 없음 

5. 브리지 
- 브리지는 허브나 리피터보다 더 복잡한 경향을 가진다. 브리지는 들어오는 데이터 패킷을 분석하여 브리지가 주어진 패킷을 다른 세그먼트의 네트워크로 전송할 수 있는지를 결정
- 브릿지 역할: 콜리전 도메인을 나누어줌

6. 브리지, 스위치 기능
- 배운다: 자신의 포트에 연결된 A PC가 통신을 위해 프레임을 보내면 이 PC의 MAC 주소를 브리지 테이블에 저장 
- flooding: 그냥 들어온 포트를 제외한 나머지 모든 포트로 뿌리는 것
    - 들어온 프레임이 찾아가는 주소를 보니 그 주소가 브리지 테이브레 없는 주소라면 그냥 나머지 포트로 뿌려주는 것 
    - 브로드캐스팅, 멀티캐스트 
- forwarding: 브리지가 목적지의 MAC 주소를 자신의 브리지 테이블에 가지고 있고, 이 목적지가 출발지의 MAC 주소와 다른 세그먼트에 존재하는 경우에 일어남 -> 해당 포트에 전달 
    - 세그먼트란? 내 컴퓨터에서 자료를 보내려고 신호를 보내면, 이 신호가 일정 지역내에 모든 컴퓨터에게 전달되는데 그 범위를 말함/ 콜리전 도메인을 형성하는 공간
    - [참고](https://movefast.tistory.com/103)
- filtering: 브리지를 못 넘어가게 막는 것 
    - 브리지가 목적지의 MAC 주소를 알고 있고 출발지와 목적지가 같은 세그먼트에 있는 경우 
- Aging: 브리지 테이블의 경우 시간이 어느정도 지나면 정보를 지움
    - Refresh: Aging 타이머가 끝나기 전에 같은 출발지를 가진 정보가 들어오면 브리지는 타이머를 리셋하고 처음부터 다시 카운트
- 브리지에서 프레임의 흐름
<img src="{{ site.url }}/assets/post_img/190717_1.jpeg">
- 브리지와 스위치 차이 
    - 스위치 처리 방식은 하드웨어로 이루어지기 때문에, 소프트웨어적으로 프레임을 처리하는 브리지에 비해 속도가 빠름 
    - 브리지는 포트들이 같은 속도를 지원, 스위치는 서로 다른 속도를 연결해줄 수 있음 
    - 스위치가 브리지에 비해 포트 수가 많음 
- 프레임을 처리하는 방식 
    - store-and-_forwarding_ 방식: 일단 들어오는 프레임을 전부 받아들이고 처리하는 방식, 에러가 발견되면 프레임을 버리고 재전송을 요구하여 에러복구 능력 뛰어남, 출발지, 목적지 주소 파악해서 처리 
    - cut-through 방식: 스위치가 들어오는 프레임의 목적지 주소만 본 후 바로 전송 처리를 시작하는 방식, 목적지로 바로 보내기때문에 처음 48비트만 보게됨. 에러 찾기 어려움
    - fragment-free 방식: 위 두 방식의 장점만 가져왔음. 전체 프레임이 다 들어올대까지 기달리지 않고 (Cut-through 방식과 비슷), 처음 48비트만 보는 것이 아니라 처음 512 비트를 봄. 에러 감지 능력도 좋음

7. Looping은 왜 생길까?
- Looping: 프레임이 네트워크상에서 무한정으로 뱅뱅 돌아서 이더넷 특성상 데이터 전송이 불가능해지는 상태 
- 발생하는 예: 하나의 호스트에서 다른 호스트로 가는 경로가 두개 이상 만들어 졌을때 발생 
    - 호스트 A -> 브로드캐스트 패킷 -> 2개의 브리지 패킷 분석 -> Flooding -> 상대방쪽 세그먼트로 브로드 캐스트 패킷이 넘겨감 -> 다시 브리지 포트로 전달되고 이런식으로 루핑이 발생
- Spanning Tree Algorithm: 스위치나 브리지에서 발생할 수 잇는 루핑을 미리 막기 위해 두개 이상의 경로가 발생하면 하나를 제외하고 나머지 경로를 자동으로 막아두었다가 기존 경로에 문제가 생기면 막아놓는 경로를 풀어서 데이터를 전송함 

8. 라우터 
- 로드 분배 역할
- 브로드캐스트 도메인 영역을 나눌 수 있음 

9. 기타
- Fault Toerant: 네트워크상에서 어떤 문제가 발생할때 대비해서 미리 장애 대비를 해놓는 것, 이중구조를 의미 
- Load Balancing: 로드를 분산
    - 예) 하나의 인터넷 회선을 이용한 인터넷 접속 대신 두개의 인터넷 회선 사용 -> 속도가 두배, 회선 하나 끊기면 다른 회선으로 이전 가능 